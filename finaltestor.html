<!DOCTYPE html>
<html lang="en-US">
<head>
  <title>Dogesplorer</title>
  <link rel="stylesheet" href="./css/styles_final.css">
  <link rel="icon" type="image/x-icon" href="./images/favicon.ico">
  <meta charset="UTF-8">
  <meta name="description" content="Doge Blockhain explorer">
  <meta name="keywords" content="doge, crypto, cryptocoin, cryptocurrency, 
  blockchain, block, wallet, address, addres, adress, explorer, explore, 
  search, dogecoin, coin, dog, dogcoin, shiba, inu, shib, sheeb, cheems, bonk,
  litecoin, ltc, trade, trades, trading, hash, transaction, bork, much, money,
  such, currency">
  <meta name="author" content="Dickie">
  <meta name="viewport" content="width=device-width, initial scale=1.0">
</head>

<body>
  <!-- add main page here -->

  <h1>Dogesplorer, the number one Doge explorer on the net!</h1>


    <!-- fake search bar -- or REAL search bar? (function)-->

    <nav class="main_nav">
      <!-- add nav links here -->
      <div id="nav_links">
        <ul class="nav_list">
          <li><a href="./dir/sitemap.html">sitemap</a></li>
          <li><a href="./dir/dogegraph.html">graph</a></li>
          <li><a href="./dir/help.html">help</a></li>
          <li><a href="https://www.youtube.com/watch?v=Zfr3L0drhS8">link</a></li>
          <li><a href="https://www.youtube.com/watch?v=C3rg4psdHxw">link</a></li>
        </ul>
      </div>


      <form id="search_form">
        <input id="search_field" type="text" placeholder=" Enter a wallet address, txn hash, or contract address">
        <button class="search_btn" type="submit">search</button>
      </form>

    </nav>

    <div class="price_display">
      <div id="doge_tag"><h3>Doge Price: </h3></div>
      <div id="doge_price">Finding latest price...</div>
    </div>



    <script>
      document.getElementById("search_form").addEventListener("submit", function(event) {
        event.preventDefault();
        
        // lol I had a long time put into this part because of a Shakespearean typo "toLoerCase" is what I typed, omg
        // I am sure you don't really care, but so much time went into this one silly mistake. But now it works!
        var searchQuery = document.getElementById("search_field").value.trim().toLowerCase();
        var pages = {
          "sitemap":"../dir/sitemap.html", 
          "dogegraph": "../dir/dogegraph.html",
          "map":"../dir/sitemap.html", 
          "graph": "../dir/dogegraph.html",
          "help" : "../dir/help.html"
        };


        if (pages.hasOwnProperty(searchQuery)) {
          window.location.href = pages[searchQuery];
        }
        else {
          alert("Page Not Found!");
        }
      });

      // CoinGecko API was suggested to me by the chatGPT. I was trying to use doge
      // chain for a long time and chatGPT was like "no, don't do that." ChatGPT was right.
      // Dogechain.info API is really advanced, but it does different things. Mostly transaction
      // and wallet information. I would like that functionality for my site too.

      // Function to fetch and update the DOGE price
      function fetchDogePrice() {
        const apiUrl = `https://api.coingecko.com/api/v3/simple/price?ids=dogecoin&vs_currencies=usd`;

        // Fetch DOGE price from CoinGecko API I think it updates every 10 mins
        fetch(apiUrl)
          .then(response => response.json())
          .then(data => {
            // this is the part that gets the price from coingecko
            const dogePrice = data.dogecoin.usd;
            // writes to log. was using for debug
            console.log('updoot the prooce, ', dogePrice);
            // writes to page
            document.getElementById('doge_price').innerText = `$${dogePrice} USD`;
          })
          // I am not actually sure it's 5 calls per minute, but it's something like that.
          .catch(error => {
            console.error('Error fetching DOGE price:', error);
            document.getElementById('doge_price').innerText = 'Only 5 price fetches per minute';
          });
      }

      // Fetch DOGE price on page load
      fetchDogePrice();
      // this updates teh price every 30 seconds
      setInterval(fetchDogePrice, 30000);

    </script>

    <!-- these were all planned and forgotten. -->
    <!-- items: search bar, sitemap, graph, news video, news links -->
    <!-- articles: mini graph, current difficulty, number of blocks, recent trades -->
  
      <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>

  </body>

<footer>
    <!-- add contact info here -->
</footer>



<script>
    document.getElementById("search_form").addEventListener("submit", function(event) {
    event.preventDefault();
    
    // lol I had a long time put into this part because of a Shakespearean typo "toLoerCase" is what I typed, omg
    // I am sure you don't really care, but so much time went into this one silly mistake. But now it works!
    var searchQuery = document.getElementById("search_field").value.trim().toLowerCase();
    var pages = {
      "sitemap":"dir/sitemap.html", 
      "dogegraph": "dir/dogegraph.html"};

    if (pages.hasOwnProperty(searchQuery)) {
      window.location.href = pages[searchQuery];
    }
    else {
      alert("Page Not Found!");
    }
  });

  // Function to fetch and update the DOGE price
  function fetchDogePrice() {
    const apiUrl = `https://api.coingecko.com/api/v3/simple/price?ids=dogecoin&vs_currencies=usd`;

    // Fetch DOGE price from CoinGecko API
    fetch(apiUrl)
      .then(response => response.json())
      .then(data => {
        const dogePrice = data.dogecoin.usd;
        console.log('updoot the prooce, ', dogePrice);
        document.getElementById('doge_price').innerText = `$${dogePrice} USD`;
      })
      .catch(error => {
        console.error('Error fetching DOGE price:', error);
        document.getElementById('doge_price').innerText = 'Only 5 price fetches per minute';
      });
  }

  // Fetch DOGE price on page load
  fetchDogePrice();

  setInterval(fetchDogePrice, 30000);

</script>

</html>



